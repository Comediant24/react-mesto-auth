(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/logo.855a8c98.svg"},26:function(e,t,a){e.exports=a.p+"static/media/success.7fc4c149.svg"},27:function(e,t,a){e.exports=a.p+"static/media/fail.c32299fa.svg"},29:function(e,t,a){e.exports=a(40)},34:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(21),r=a.n(c),l=(a(34),a(28)),i=a(1),s=a(2),u=a(7),m=a(3),p=a(22),d=a.n(p);var f=function(e){e.loggedIn;var t=e.userEmail,a=e.onClick;return o.a.createElement("header",{className:"header"},o.a.createElement(u.b,{to:"/",className:"header__link"},o.a.createElement("img",{src:d.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430",className:"header__logo"})),o.a.createElement("ul",{className:"header__nav"},o.a.createElement(m.b,{exact:!0,path:"/"},o.a.createElement("li",{className:"header__nav-item"},o.a.createElement("p",{className:"header__user-email"},t)),o.a.createElement("li",{className:"header__nav-item"},o.a.createElement("button",{onClick:a,className:"link header__link button header__button header__button_signOut"},"\u0412\u044b\u0445\u043e\u0434"))),o.a.createElement(m.b,{path:"/sign-in"},o.a.createElement("li",{className:"header__nav-item"},o.a.createElement(u.b,{to:"/sign-up",className:"link header__link header__link_sign-up"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),o.a.createElement(m.b,{path:"/sign-up"},o.a.createElement("li",{className:"header__nav-item"},o.a.createElement(u.b,{to:"/sign-in",className:"link header__link header__link_sign-in"},"\u0412\u0445\u043e\u0434")))))},h=o.a.createContext();var b=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,c=e.onCardDelete,r=o.a.useContext(h)._id,l=t.owner===r,i=t.likes.some((function(e){return e===r}));return o.a.createElement("li",{className:"places__items"},o.a.createElement("img",{src:t.link,alt:"\u041b\u0443\u0447\u0448\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"places__image",onClick:function(){a(t)}}),o.a.createElement("div",{className:"places__name"},o.a.createElement("h2",{className:"places__title"},t.name),o.a.createElement("div",{className:"places__like"},o.a.createElement("button",{className:"button places__button-like ".concat(i?"places__button-like_enabled":""),type:"button","aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a \u043c\u0435\u0441\u0442\u0443",onClick:function(){n(t)}}),o.a.createElement("p",{className:"places__like-counter"},t.likes.length))),l?o.a.createElement("button",{className:"button places__button-delete",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443",onClick:function(){c(t)}}):"")};var _=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddPlace,c=e.onCardClick,r=e.cards,l=e.onCardLike,i=e.onCardDelete,s=e.isCardsLoading,u=o.a.useContext(h),m=u.name,p=u.about,d=u.avatar;return o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{className:"profile"},o.a.createElement("button",{type:"button",onClick:t,className:"button button_non-opacity profile__button-avatar"},o.a.createElement("img",{className:"profile__avatar",src:d,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})),o.a.createElement("div",{className:"profile__info"},o.a.createElement("h1",{className:"profile__user-name"},m),o.a.createElement("button",{className:"button profile__user-edit-button",onClick:a,type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),o.a.createElement("p",{className:"profile__user-job"},p)),o.a.createElement("button",{className:"button profile__add-button",type:"button",onClick:n,"aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"})),o.a.createElement("section",{className:"places"},o.a.createElement("ul",{className:"places__cards"},s?o.a.createElement("div",{className:"places__loading-spinner"},o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null),o.a.createElement("div",null)):r.map((function(e){return o.a.createElement(b,{key:e._id,card:e,onCardLike:l,onCardDelete:i,onCardClick:c})})))))};var v=function(){return o.a.createElement("footer",{className:"footer"},o.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var E=function(e){var t=e.card,a=e.onClose;return o.a.createElement("section",{className:"popup popup_image-places ".concat(t.isOpen?"popup_opened":"")},o.a.createElement("div",{onClick:a,className:"popup__overlay popup__overlay_image-places"}),o.a.createElement("figure",{className:"popup__places"},o.a.createElement("img",{src:t.link,alt:"\u041b\u0443\u0447\u0448\u0430\u044f \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f ".concat(t.name),className:"popup__places-image"}),o.a.createElement("figcaption",{className:"popup__places-title"},t.name),o.a.createElement("button",{className:"button popup__close-button popup__close-button_image-places",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:a})))},g=a(24),O=a(25),j="https://api.bairamukov-mesto.students.nomoreparties.space",k={baseUrl:j,headers:{"Content-Type":"application/json"}},C=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(g.a)(this,e),this._url=a,this._headers=n}return Object(O.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(e)})}).then((function(e){return t._handleResponse(e)}))}},{key:"getUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(e)})}).then((function(e){return t._handleResponse(e)}))}},{key:"setUserInfo",value:function(e,t){var a=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return a._handleResponse(e)}))}},{key:"addCard",value:function(e,t){var a=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return a._handleResponse(e)}))}},{key:"removeCard",value:function(e,t){var a=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(t)})}).then((function(e){return a._handleResponse(e)}))}},{key:"changeAvatar",value:function(e,t){var a=this;return fetch("".concat(this._url,"/users/avatar"),{method:"PATCH",headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(t)}),body:JSON.stringify({avatar:e.avatar})}).then((function(e){return a._handleResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t,a){var n=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:t?"PUT":"DELETE",headers:Object(i.a)(Object(i.a)({},this._headers),{},{authorization:"Bearer ".concat(a)})}).then((function(e){return n._handleResponse(e)}))}}]),e}())(k),N=a(12);function y(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({}),r=Object(s.a)(c,2),l=r[0],u=r[1],m=Object(n.useState)({}),p=Object(s.a)(m,2),d=p[0],f=p[1],h=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e),u(t),f(a)}),[o,u,f]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,c=t.value;o(Object(i.a)(Object(i.a)({},a),{},Object(N.a)({},n,c))),u(Object(i.a)(Object(i.a)({},l),{},Object(N.a)({},n,t.validationMessage)))},errors:l,isValid:d,resetForm:h,setIsValid:f}}var S=a(14),V=function(e){var t=e.changeValue,a=e.classBlock,n=e.name,c=e.value,r=e.validationMessage,l=Object(S.a)(e,["changeValue","classBlock","name","value","validationMessage"]);return o.a.createElement("div",{className:"input__container ".concat(a,"__input-container")},o.a.createElement("input",Object.assign({},l,{className:"input ".concat(a,"__input ").concat(a,"__input_type_").concat(n),name:n,onChange:function(e){t(e)},value:c||""})),o.a.createElement("span",{className:"input__error ".concat(a,"__error")},r||""))},x=Object(n.forwardRef)((function(e,t){var a=e.isValid,n=void 0===a||a,c=e.name,r=e.title,l=e.children,i=e.isOpen,s=e.onClose,u=e.onSubmit,m=e.buttonText;return o.a.createElement("section",{className:"popup popup_".concat(c," ").concat(i?"popup_opened":"")},o.a.createElement("div",{onClick:s,className:"popup__overlay poup__overlay_".concat(c)}),o.a.createElement("form",{ref:t,className:"popup__form popup__form_".concat(c),name:c,action:"#",onSubmit:u,noValidate:!0},o.a.createElement("h3",{className:"popup__title"},r),o.a.createElement("fieldset",{className:"popup__input-container"},l),o.a.createElement("button",{className:"button popup__submit-button popup__button-profile ".concat(n?"":"popup__submit-button_disabled"),type:"submit",disabled:!n},m||"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),o.a.createElement("button",{className:"button popup__close-button popup__close-button_".concat(c),onClick:s,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e"})))}));var L=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateUser,r=e.isSending,l=Object(n.useContext)(h),i=Object(n.createRef)(),s=y(),u=s.values,m=s.handleChange,p=s.errors,d=s.isValid,f=s.setIsValid,b=s.resetForm;return Object(n.useEffect)((function(){f(i.current.checkValidity())}),[f,i]),Object(n.useEffect)((function(){l&&b(l)}),[l,b,t]),o.a.createElement(x,{ref:i,name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),c(u)},isValid:d,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement(V,{value:u.name,changeValue:m,classBlock:"popup",name:"name",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",required:!0,minLength:"2",maxLength:"40",autoComplete:"off",validationMessage:p.name}),o.a.createElement(V,{value:u.about,changeValue:m,classBlock:"popup",name:"about",type:"text",placeholder:"\u041f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u044f",required:!0,minLength:"2",maxLength:"200",autoComplete:"off",validationMessage:p.about}))};var w=function(e){var t=e.isOpen,a=e.onClose,c=e.onUpdateAvatar,r=e.isSending,l=Object(n.createRef)(),i=y(),s=i.values,u=i.handleChange,m=i.errors,p=i.isValid,d=i.setIsValid,f=i.resetForm;return Object(n.useEffect)((function(){d(l.current.checkValidity())}),[d,l]),Object(n.useEffect)((function(){f()}),[f,t]),o.a.createElement(x,{ref:l,name:"avatar-change",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),c(s)},isValid:p,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement(V,{value:s.avatar,changeValue:u,classBlock:"popup",name:"avatar",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,autoComplete:"off",validationMessage:m.avatar}))};var T=function(e){var t=e.isOpen,a=e.onClose,c=e.onAddPlace,r=e.isSending,l=Object(n.createRef)(),i=y(),s=i.values,u=i.handleChange,m=i.errors,p=i.isValid,d=i.setIsValid,f=i.resetForm;return Object(n.useEffect)((function(){d(l.current.checkValidity())}),[d,l]),Object(n.useEffect)((function(){f()}),[f,t]),o.a.createElement(x,{ref:l,name:"add-places",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),c(s)},isValid:p,buttonText:r?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},o.a.createElement(V,{value:s.name,changeValue:u,classBlock:"popup",name:"name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30",autoComplete:"off",validationMessage:m.name}),o.a.createElement(V,{value:s.link,changeValue:u,classBlock:"popup",name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,autoComplete:"off",validationMessage:m.link}))},I=function(e){var t=e.className,a=e.title,c=void 0===a?"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0444\u043e\u0440\u043c\u044b":a,r=e.buttonText,l=void 0===r?"\u0421\u0430\u0431\u043c\u0438\u0442 \u0444\u043e\u0440\u043c\u044b":r,i=e.loginLink,s=e.onSubmit,m=y(),p=m.values,d=m.handleChange,f=m.errors,h=m.isValid,b=m.setIsValid,_=m.resetForm,v=Object(n.createRef)();Object(n.useEffect)((function(){b(v.current.checkValidity())}),[b,v]);return o.a.createElement("form",{ref:v,className:"auth-form ".concat(t),onSubmit:function(e){s(e,p),_()},name:t,action:"#",noValidate:!0},o.a.createElement("h3",{className:"auth-form__title"},c),o.a.createElement("fieldset",{className:"auth-form__container"},o.a.createElement(V,{value:p.email,changeValue:d,classBlock:"auth-form",name:"email",type:"email",placeholder:"Email",required:!0,validationMessage:f.email}),o.a.createElement(V,{value:p.password,changeValue:d,classBlock:"auth-form",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,autoComplete:"off",validationMessage:f.password})),o.a.createElement("button",{type:"submit","aria-label":"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435",className:"button auth-form__button auth-form__button_submit ".concat(h?"":"auth-form__button_submit_disabled"),disabled:!h},l),o.a.createElement(u.b,{to:"/sign-in",className:"link auth-form__is-login-link"},i?"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b? \u0412\u043e\u0439\u0442\u0438":""))},B=function(e){var t=e.onRegister;return o.a.createElement("div",null,o.a.createElement(I,{className:"register",title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",buttonText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",loginLink:!0,onSubmit:function(e,a){e.preventDefault();var n=a.email,o=a.password;t(n,o)}}))},A=function(e){var t=e.onLogin;return o.a.createElement("div",null,o.a.createElement(I,{className:"login",title:"\u0412\u0445\u043e\u0434",buttonText:"\u0412\u043e\u0439\u0442\u0438",loginLink:!1,onSubmit:function(e,a){e.preventDefault();var n=a.email,o=a.password;t(n,o)}}))},P=function(e){var t=e.loggedIn,a=Object(S.a)(e,["loggedIn"]);return t?o.a.createElement(m.b,a):o.a.createElement(m.a,{to:"/sign-in"})},R=a(26),U=a.n(R),D=a(27),M=a.n(D),z=function(e){var t=e.message,a=e.isOpen,n=e.isSuccess,c=e.onClose;return o.a.createElement("section",{className:"infotooltip popup popup_infotooltip ".concat(a?"popup_opened":"")},o.a.createElement("div",{onClick:c,className:"popup__overlay popup__overlay_infotooltip"}),o.a.createElement("div",{className:"infotooltip__container"},o.a.createElement("img",{src:n?U.a:M.a,alt:n?"\u0423\u0441\u043f\u0435\u0448\u043d\u0430\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u041e\u0448\u0438\u0431\u043a\u0430",className:"infotooltip__image ".concat(n?"infotooltip__image_success":"infotooltip__image_fail")}),o.a.createElement("h3",{className:"infotooltip__title"},t),o.a.createElement("button",{className:"button popup__close-button popup__close-button_infotooltip",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:c})))},q=function(e){return e.ok?e.json():Promise.reject(e.status)};var J=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),u=Object(s.a)(r,2),p=u[0],d=u[1],b=Object(n.useState)(!1),g=Object(s.a)(b,2),O=g[0],k=g[1],N=Object(n.useState)({}),y=Object(s.a)(N,2),S=y[0],V=y[1],I=Object(n.useState)({}),R=Object(s.a)(I,2),U=R[0],D=R[1],M=Object(n.useState)([]),J=Object(s.a)(M,2),F=J[0],H=J[1],W=Object(n.useState)({}),G=Object(s.a)(W,2),$=G[0],K=G[1],Q=Object(n.useState)(!1),X=Object(s.a)(Q,2),Y=X[0],Z=X[1],ee=Object(n.useState)(!1),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],oe=Object(n.useState)(!1),ce=Object(s.a)(oe,2),re=ce[0],le=ce[1],ie=Object(n.useState)(!1),se=Object(s.a)(ie,2),ue=se[0],me=se[1],pe=Object(n.useState)(!1),de=Object(s.a)(pe,2),fe=de[0],he=de[1],be=Object(n.useState)(!1),_e=Object(s.a)(be,2),ve=_e[0],Ee=_e[1],ge=Object(n.useState)(""),Oe=Object(s.a)(ge,2),je=Oe[0],ke=Oe[1],Ce=Object(n.useState)(""),Ne=Object(s.a)(Ce,2),ye=Ne[0],Se=Ne[1],Ve=Object(n.useState)(""),xe=Object(s.a)(Ve,2),Le=xe[0],we=xe[1],Te=Object(m.g)();function Ie(){c(!1),d(!1),k(!1),V({}),Z(!1),he(!1)}function Be(){var e=localStorage.getItem("token");e&&(we(e),function(e){return fetch("".concat(j,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return q(e)}))}(e).then((function(e){me(!0),Se(e.email),Te.push("/")})).catch((function(e){return 400===e?console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"):401===e?console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d"):void console.log(e)})))}return Object(n.useEffect)((function(){ne(!0),Promise.all([C.getInitialCards(Le),C.getUserInfo(Le)]).then((function(e){var t=Object(s.a)(e,2),a=t[0],n=t[1];H(a),D(n)})).catch((function(e){return console.error(e)})).finally((function(){return ne(!1)}))}),[ue]),Object(n.useEffect)((function(){function e(e){27===e.keyCode&&Ie()}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),Object(n.useEffect)((function(){Be()}),[]),o.a.createElement("div",{className:"root"},o.a.createElement("div",{className:"page"},o.a.createElement(h.Provider,{value:U},o.a.createElement(f,{loggedIn:ue,userEmail:ye,onClick:function(){localStorage.removeItem("token"),me(!1),Te.push("/sign-in")}}),o.a.createElement("main",{className:"content"},o.a.createElement(m.d,null,o.a.createElement(P,{exact:!0,path:"/",loggedIn:ue},o.a.createElement(_,{onEditAvatar:function(){k(!0)},onEditProfile:function(){c(!0)},onAddPlace:function(){d(!0)},onCardClick:function(e){V(Object(i.a)(Object(i.a)({},e),{},{isOpen:!0}))},cards:F,onCardLike:function(e){var t=e.likes.some((function(e){return e===U._id}));C.changeLikeCardStatus(e._id,!t,Le).then((function(t){console.log(t);var a=F.map((function(a){return a._id===e._id?t:a}));H(a)})).catch((function(e){return console.error(e)}))},onCardDelete:function(e){K(e),Z(!0)},isCardsLoading:ae})),o.a.createElement(m.b,{path:"/sign-up"},o.a.createElement(B,{onRegister:function(e,t){(function(e,t){return fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return q(e)}))})(e,t).then((function(e){e&&(ke("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),he(!0),Ee(!0),Te.push("/sign-in"))})).catch((function(e){if(ke("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),he(!0),Ee(!1),400===e)return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439");console.log(e)}))}})),o.a.createElement(m.b,{path:"/sign-in"},o.a.createElement(A,{onLogin:function(e,t){(function(e,t){return fetch("".concat(j,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then((function(e){return q(e)}))})(e,t).then((function(t){t.token&&(we(t.token),localStorage.setItem("token",t.token),Se(e),me(!0),Te.push("/"))})).catch((function(e){return ke("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."),he(!0),Ee(!1),400===e?console.log("\u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"):401===e?console.log("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"):void console.log(e)}))}})),o.a.createElement(m.b,null,ue?o.a.createElement(m.a,{to:"/"}):o.a.createElement(m.a,{to:"/sign-in"})))),o.a.createElement(v,null),o.a.createElement(z,{message:je,isSuccess:ve,isOpen:fe,onClose:Ie}),o.a.createElement(w,{isSending:re,isOpen:O,onClose:Ie,onUpdateAvatar:function(e){le(!0),C.changeAvatar(e,Le).then((function(e){return D(e)})).then((function(){return Ie()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),o.a.createElement(L,{isSending:re,isOpen:a,onClose:Ie,onUpdateUser:function(e){le(!0),C.setUserInfo(e,Le).then((function(e){return D(e)})).then((function(){return Ie()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),o.a.createElement(T,{isSending:re,isOpen:p,onClose:Ie,onAddPlace:function(e){le(!0),C.addCard(e,Le).then((function(e){return H([e].concat(Object(l.a)(F)))})).then((function(){return Ie()})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))}}),o.a.createElement(E,{card:S,onClose:Ie}),o.a.createElement(x,{isEnabled:"true",name:"card-delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:Y,onClose:Ie,onSubmit:function(e){le(!0),e.preventDefault(),C.removeCard($._id,Le).then((function(){var e=F.filter((function(e){return e!==$}));H(e)})).then((function(){return Z(!1)})).catch((function(e){return console.error(e)})).finally((function(){return le(!1)}))},buttonText:re?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...":"\u0414\u0430"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(u.a,null,o.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.7b5ad2e3.chunk.js.map