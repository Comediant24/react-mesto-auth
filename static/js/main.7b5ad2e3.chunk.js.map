{"version":3,"sources":["images/logo.svg","images/success.svg","images/fail.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/utils.js","utils/api.js","hooks/useFormWithValidation.js","components/Input.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/AuthForm.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/auth.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","loggedIn","userEmail","onClick","className","to","src","logo","alt","exact","path","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","_id","useContext","isOwn","owner","isLiked","likes","some","i","link","name","type","aria-label","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","isCardsLoading","about","avatar","map","key","Footer","ImagePopup","onClose","isOpen","BASE_URL","configHeaders","baseUrl","headers","api","this","_url","_headers","response","ok","json","Promise","reject","status","token","fetch","authorization","then","res","_handleResponse","formData","method","body","JSON","stringify","id","like","useFormWithValidation","useState","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","target","value","validationMessage","Input","changeValue","classBlock","rest","onChange","e","PopupWithForm","forwardRef","ref","title","children","onSubmit","buttonText","action","noValidate","disabled","EditProfilePopup","onUpdateUser","isSending","currentUser","valid","createRef","useEffect","current","checkValidity","preventDefault","placeholder","required","minLength","maxLength","autoComplete","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","AuthForm","loginLink","email","password","Register","onRegister","registerForm","Login","onLogin","ProtectedRoute","routeProps","InfoTooltip","message","isSuccess","success","fail","handleResponse","App","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","cardDelete","setCardDelete","isDeleteReqPopupOpen","setIsDeleteReqPopupOpen","setIsCardsLoading","isDataSending","setDataSending","setLoggedIn","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","isInfoTooltipTypeSuccess","setIsInfoTooltipTypeSuccess","infoTooltipMessage","setInfoTooltipMessage","setUserEmail","setToken","history","useHistory","closeAllPopups","tokenCheck","localStorage","getItem","Accept","Authorization","auth","userData","push","catch","err","console","log","all","getInitialCards","getUserInfo","cardElements","user","error","finally","escFunction","keyCode","document","addEventListener","removeEventListener","Provider","removeItem","changeLikeCardStatus","newCard","newCards","c","data","setItem","changeAvatar","update","setUserInfo","addCard","isEnabled","removeCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7b5ad2e3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.7fc4c149.svg\";","module.exports = __webpack_public_path__ + \"static/media/fail.c32299fa.svg\";","import React from 'react';\r\nimport { Link, Route } from 'react-router-dom';\r\nimport logo from '../images/logo.svg';\r\n\r\nfunction Header({ loggedIn, userEmail, onClick }) {\r\n  return (\r\n    <header className=\"header\">\r\n      <Link to=\"/\" className=\"header__link\">\r\n        <img src={logo} alt=\"Логотип сайта\" className=\"header__logo\" />\r\n      </Link>\r\n      <ul className=\"header__nav\">\r\n        <Route exact path=\"/\">\r\n          <li className=\"header__nav-item\">\r\n            <p className=\"header__user-email\">{userEmail}</p>\r\n          </li>\r\n          <li className=\"header__nav-item\">\r\n            <button\r\n              onClick={onClick}\r\n              className=\"link header__link button header__button header__button_signOut\"\r\n            >\r\n              Выход\r\n            </button>\r\n          </li>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n          <li className=\"header__nav-item\">\r\n            <Link\r\n              to=\"/sign-up\"\r\n              className=\"link header__link header__link_sign-up\"\r\n            >\r\n              Регистрация\r\n            </Link>\r\n          </li>\r\n        </Route>\r\n        <Route path=\"/sign-up\">\r\n          <li className=\"header__nav-item\">\r\n            <Link\r\n              to=\"/sign-in\"\r\n              className=\"link header__link header__link_sign-in\"\r\n            >\r\n              Вход\r\n            </Link>\r\n          </li>\r\n        </Route>\r\n      </ul>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const { _id } = React.useContext(CurrentUserContext);\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  const isOwn = card.owner === _id;\r\n  const isLiked = card.likes.some((i) => i === _id);\r\n  return (\r\n    <li className=\"places__items\">\r\n      <img\r\n        src={card.link}\r\n        alt={`Лучшая фотография ${card.name}`}\r\n        className=\"places__image\"\r\n        onClick={handleClick}\r\n      />\r\n      <div className=\"places__name\">\r\n        <h2 className=\"places__title\">{card.name}</h2>\r\n        <div className=\"places__like\">\r\n          <button\r\n            className={`button places__button-like ${\r\n              isLiked ? 'places__button-like_enabled' : ''\r\n            }`}\r\n            type=\"button\"\r\n            aria-label=\"Поставить лайк месту\"\r\n            onClick={handleLikeClick}\r\n          ></button>\r\n          <p className=\"places__like-counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n      {isOwn ? (\r\n        <button\r\n          className=\"button places__button-delete\"\r\n          type=\"button\"\r\n          aria-label=\"Удалить карточку\"\r\n          onClick={handleDeleteClick}\r\n        ></button>\r\n      ) : (\r\n        ''\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Card from './Card';\r\n\r\nfunction Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n  isCardsLoading,\r\n}) {\r\n  const { name, about, avatar } = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <>\r\n      <section className=\"profile\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onEditAvatar}\r\n          className=\"button button_non-opacity profile__button-avatar\"\r\n        >\r\n          <img\r\n            className=\"profile__avatar\"\r\n            src={avatar}\r\n            alt=\"Аватар пользователя\"\r\n          />\r\n        </button>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__user-name\">{name}</h1>\r\n          <button\r\n            className=\"button profile__user-edit-button\"\r\n            onClick={onEditProfile}\r\n            type=\"button\"\r\n            aria-label=\"Редактировать информацию пользователя\"\r\n          ></button>\r\n          <p className=\"profile__user-job\">{about}</p>\r\n        </div>\r\n        <button\r\n          className=\"button profile__add-button\"\r\n          type=\"button\"\r\n          onClick={onAddPlace}\r\n          aria-label=\"Добавить информацию\"\r\n        ></button>\r\n      </section>\r\n      <section className=\"places\">\r\n        <ul className=\"places__cards\">\r\n          {isCardsLoading ? (\r\n            <div className=\"places__loading-spinner\">\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n              <div></div>\r\n            </div>\r\n          ) : (\r\n            cards.map((card) => (\r\n              <Card\r\n                key={card._id}\r\n                card={card}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n                onCardClick={onCardClick}\r\n              />\r\n            ))\r\n          )}\r\n        </ul>\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <section\r\n      className={`popup popup_image-places ${\r\n        card.isOpen ? 'popup_opened' : ''\r\n      }`}\r\n    >\r\n      <div\r\n        onClick={onClose}\r\n        className=\"popup__overlay popup__overlay_image-places\"\r\n      ></div>\r\n      <figure className=\"popup__places\">\r\n        <img\r\n          src={card.link}\r\n          alt={`Лучшая фотография ${card.name}`}\r\n          className=\"popup__places-image\"\r\n        />\r\n        <figcaption className=\"popup__places-title\">{card.name}</figcaption>\r\n        <button\r\n          className=\"button popup__close-button popup__close-button_image-places\"\r\n          type=\"button\"\r\n          aria-label=\"Закрыть окно\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </figure>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","export const BASE_URL =\r\n  'https://api.bairamukov-mesto.students.nomoreparties.space';\r\n\r\nexport const configHeaders = {\r\n  baseUrl: BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n};\r\n","import { BASE_URL, configHeaders } from './utils';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._url = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleResponse(response) {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n    return Promise.reject(`Ошибка: ${response.status}`);\r\n  }\r\n\r\n  getInitialCards(token) {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  getUserInfo(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  setUserInfo(formData, token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n      body: JSON.stringify({\r\n        name: formData.name,\r\n        about: formData.about,\r\n      }),\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  addCard(formData, token) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n      body: JSON.stringify({\r\n        name: formData.name,\r\n        link: formData.link,\r\n      }),\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  removeCard(id, token) {\r\n    return fetch(`${this._url}/cards/${id}`, {\r\n      method: 'DELETE',\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  changeAvatar(formData, token) {\r\n    return fetch(`${this._url}/users/avatar`, {\r\n      method: 'PATCH',\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n      body: JSON.stringify({\r\n        avatar: formData.avatar,\r\n      }),\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n\r\n  changeLikeCardStatus(id, like, token) {\r\n    return fetch(`${this._url}/cards/${id}/likes`, {\r\n      method: like ? 'PUT' : 'DELETE',\r\n      headers: { ...this._headers, authorization: `Bearer ${token}` },\r\n    }).then((res) => this._handleResponse(res));\r\n  }\r\n}\r\n\r\nconst api = new Api(configHeaders);\r\nexport default api;\r\n","import { useCallback, useState } from 'react';\r\n\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState({});\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: target.validationMessage });\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleChange, errors, isValid, resetForm, setIsValid };\r\n}\r\n","import React from 'react';\r\n\r\nconst Input = ({\r\n  changeValue,\r\n  classBlock,\r\n  name,\r\n  value,\r\n  validationMessage,\r\n  ...rest\r\n}) => {\r\n  function handleInputChange(e) {\r\n    changeValue(e);\r\n  }\r\n\r\n  return (\r\n    <div className={`input__container ${classBlock}__input-container`}>\r\n      <input\r\n        {...rest}\r\n        className={`input ${classBlock}__input ${classBlock}__input_type_${name}`}\r\n        name={name}\r\n        onChange={handleInputChange}\r\n        value={value || ''}\r\n      />\r\n      <span className={`input__error ${classBlock}__error`}>\r\n        {validationMessage || ''}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import React, { forwardRef } from 'react';\r\n\r\nconst PopupWithForm = forwardRef(\r\n  (\r\n    {\r\n      isValid = true,\r\n      name,\r\n      title,\r\n      children,\r\n      isOpen,\r\n      onClose,\r\n      onSubmit,\r\n      buttonText,\r\n    },\r\n    ref\r\n  ) => {\r\n    return (\r\n      <section\r\n        className={`popup popup_${name} ${isOpen ? 'popup_opened' : ''}`}\r\n      >\r\n        <div\r\n          onClick={onClose}\r\n          className={`popup__overlay poup__overlay_${name}`}\r\n        ></div>\r\n        <form\r\n          ref={ref}\r\n          className={`popup__form popup__form_${name}`}\r\n          name={name}\r\n          action=\"#\"\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n        >\r\n          <h3 className=\"popup__title\">{title}</h3>\r\n          <fieldset className=\"popup__input-container\">{children}</fieldset>\r\n          <button\r\n            className={`button popup__submit-button popup__button-profile ${\r\n              isValid ? '' : 'popup__submit-button_disabled'\r\n            }`}\r\n            type=\"submit\"\r\n            disabled={!isValid}\r\n          >\r\n            {buttonText || 'Сохранить'}\r\n          </button>\r\n          <button\r\n            className={`button popup__close-button popup__close-button_${name}`}\r\n            onClick={onClose}\r\n            type=\"button\"\r\n            aria-label=\"Закрыть окно\"\r\n          ></button>\r\n        </form>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\nexport default PopupWithForm;\r\n","import React, { createRef, useContext, useEffect } from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport Input from './Input';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isSending }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const valid = createRef();\r\n  const {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    setIsValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    setIsValid(valid.current.checkValidity());\r\n  }, [setIsValid, valid]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser(values);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser);\r\n    }\r\n  }, [currentUser, resetForm, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      ref={valid}\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      buttonText={isSending ? 'Сохранение...' : 'Сохранить'}\r\n    >\r\n      <Input\r\n        value={values.name}\r\n        changeValue={handleChange}\r\n        classBlock=\"popup\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Ваше имя\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"40\"\r\n        autoComplete=\"off\"\r\n        validationMessage={errors.name}\r\n      />\r\n      <Input\r\n        value={values.about}\r\n        changeValue={handleChange}\r\n        classBlock=\"popup\"\r\n        name=\"about\"\r\n        type=\"text\"\r\n        placeholder=\"Профессия\"\r\n        required\r\n        minLength=\"2\"\r\n        maxLength=\"200\"\r\n        autoComplete=\"off\"\r\n        validationMessage={errors.about}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React, { createRef, useEffect } from 'react';\r\nimport Input from './Input';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isSending }) {\r\n  const valid = createRef();\r\n  const {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    setIsValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    setIsValid(valid.current.checkValidity());\r\n  }, [setIsValid, valid]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar(values);\r\n  }\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [resetForm, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      ref={valid}\r\n      name=\"avatar-change\"\r\n      title=\"Обновить аватар\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      buttonText={isSending ? 'Сохранение...' : 'Сохранить'}\r\n    >\r\n      <Input\r\n        value={values.avatar}\r\n        changeValue={handleChange}\r\n        classBlock=\"popup\"\r\n        name=\"avatar\"\r\n        type=\"url\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n        autoComplete=\"off\"\r\n        validationMessage={errors.avatar}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import React, { createRef, useEffect } from 'react';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport Input from './Input';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isSending }) {\r\n  const valid = createRef();\r\n  const {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    setIsValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    setIsValid(valid.current.checkValidity());\r\n  }, [setIsValid, valid]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace(values);\r\n  }\r\n\r\n  useEffect(() => {\r\n    resetForm();\r\n  }, [resetForm, isOpen]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      ref={valid}\r\n      name=\"add-places\"\r\n      title=\"Новое место\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValid={isValid}\r\n      buttonText={isSending ? 'Сохранение...' : 'Сохранить'}\r\n    >\r\n      <Input\r\n        value={values.name}\r\n        changeValue={handleChange}\r\n        classBlock=\"popup\"\r\n        name=\"name\"\r\n        type=\"text\"\r\n        placeholder=\"Название\"\r\n        required\r\n        minLength=\"1\"\r\n        maxLength=\"30\"\r\n        autoComplete=\"off\"\r\n        validationMessage={errors.name}\r\n      />\r\n      <Input\r\n        value={values.link}\r\n        changeValue={handleChange}\r\n        classBlock=\"popup\"\r\n        name=\"link\"\r\n        type=\"url\"\r\n        placeholder=\"Ссылка на картинку\"\r\n        required\r\n        autoComplete=\"off\"\r\n        validationMessage={errors.link}\r\n      />\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React, { createRef, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport Input from './Input';\r\n\r\nconst AuthForm = ({\r\n  className,\r\n  title = 'Заголовок формы',\r\n  buttonText = 'Сабмит формы',\r\n  loginLink,\r\n  onSubmit,\r\n}) => {\r\n  const {\r\n    values,\r\n    handleChange,\r\n    errors,\r\n    isValid,\r\n    setIsValid,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  const valid = createRef();\r\n  useEffect(() => {\r\n    setIsValid(valid.current.checkValidity());\r\n  }, [setIsValid, valid]);\r\n\r\n  const handleSubmit = (e) => {\r\n    onSubmit(e, values);\r\n    resetForm();\r\n  };\r\n\r\n  return (\r\n    <form\r\n      ref={valid}\r\n      className={`auth-form ${className}`}\r\n      onSubmit={handleSubmit}\r\n      name={className}\r\n      action=\"#\"\r\n      noValidate\r\n    >\r\n      <h3 className=\"auth-form__title\">{title}</h3>\r\n      <fieldset className=\"auth-form__container\">\r\n        <Input\r\n          value={values.email}\r\n          changeValue={handleChange}\r\n          classBlock=\"auth-form\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          // autoComplete=\"off\"\r\n          validationMessage={errors.email}\r\n        />\r\n        <Input\r\n          value={values.password}\r\n          changeValue={handleChange}\r\n          classBlock=\"auth-form\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Пароль\"\r\n          required\r\n          autoComplete=\"off\"\r\n          validationMessage={errors.password}\r\n        />\r\n      </fieldset>\r\n      <button\r\n        type=\"submit\"\r\n        aria-label=\"Отправить данные\"\r\n        className={`button auth-form__button auth-form__button_submit ${\r\n          isValid ? '' : 'auth-form__button_submit_disabled'\r\n        }`}\r\n        disabled={!isValid}\r\n      >\r\n        {buttonText}\r\n      </button>\r\n      <Link to=\"/sign-in\" className=\"link auth-form__is-login-link\">\r\n        {loginLink ? 'Уже зарегестрированны? Войти' : ''}\r\n      </Link>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n","import React from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nconst Register = ({ onRegister }) => {\r\n  const handleSubmit = (e, registerForm) => {\r\n    e.preventDefault();\r\n    const { email, password } = registerForm;\r\n    onRegister(email, password);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AuthForm\r\n        className=\"register\"\r\n        title=\"Регистрация\"\r\n        buttonText=\"Зарегистрироваться\"\r\n        loginLink={true}\r\n        onSubmit={handleSubmit}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React from 'react';\r\nimport AuthForm from './AuthForm';\r\n\r\nconst Login = ({ onLogin }) => {\r\n  const handleSubmit = (e, registerForm) => {\r\n    e.preventDefault();\r\n    const { email, password } = registerForm;\r\n    onLogin(email, password);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <AuthForm\r\n        className=\"login\"\r\n        title=\"Вход\"\r\n        buttonText=\"Войти\"\r\n        loginLink={false}\r\n        onSubmit={handleSubmit}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ loggedIn, ...routeProps }) => {\r\n  return loggedIn ? <Route {...routeProps} /> : <Redirect to=\"/sign-in\" />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport success from '../images/success.svg';\r\nimport fail from '../images/fail.svg';\r\n\r\nconst InfoTooltip = ({ message, isOpen, isSuccess, onClose }) => {\r\n  return (\r\n    <section\r\n      className={`infotooltip popup popup_infotooltip ${\r\n        isOpen ? 'popup_opened' : ''\r\n      }`}\r\n    >\r\n      <div\r\n        onClick={onClose}\r\n        className=\"popup__overlay popup__overlay_infotooltip\"\r\n      ></div>\r\n      <div className=\"infotooltip__container\">\r\n        <img\r\n          src={isSuccess ? success : fail}\r\n          alt={isSuccess ? 'Успешная регистрация' : 'Ошибка'}\r\n          className={`infotooltip__image ${\r\n            isSuccess ? 'infotooltip__image_success' : 'infotooltip__image_fail'\r\n          }`}\r\n        ></img>\r\n        <h3 className=\"infotooltip__title\">{message}</h3>\r\n        <button\r\n          className=\"button popup__close-button popup__close-button_infotooltip\"\r\n          type=\"button\"\r\n          aria-label=\"Закрыть окно\"\r\n          onClick={onClose}\r\n        ></button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default InfoTooltip;\r\n","import { BASE_URL } from './utils';\r\n\r\nconst handleResponse = (response) => {\r\n  if (response.ok) {\r\n    return response.json();\r\n  }\r\n  return Promise.reject(response.status);\r\n};\r\n\r\nexport const register = (email, password) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => handleResponse(res));\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((res) => handleResponse(res));\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  }).then((res) => handleResponse(res));\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport Register from './Register';\r\nimport Login from './Login';\r\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport * as auth from '../utils/auth';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [cardDelete, setCardDelete] = useState({});\r\n  const [isDeleteReqPopupOpen, setIsDeleteReqPopupOpen] = useState(false);\r\n  const [isCardsLoading, setIsCardsLoading] = useState(false);\r\n  const [isDataSending, setDataSending] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\r\n  const [isInfoTooltipTypeSuccess, setIsInfoTooltipTypeSuccess] = useState(\r\n    false\r\n  );\r\n  const [infoTooltipMessage, setInfoTooltipMessage] = useState('');\r\n  const [userEmail, setUserEmail] = useState('');\r\n  const [token, setToken] = useState('');\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    setIsCardsLoading(true);\r\n    Promise.all([api.getInitialCards(token), api.getUserInfo(token)])\r\n      .then(([cardElements, user]) => {\r\n        setCards(cardElements);\r\n        setCurrentUser(user);\r\n      })\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setIsCardsLoading(false));\r\n  }, [loggedIn]);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some((i) => i === currentUser._id);\r\n    api\r\n      .changeLikeCardStatus(card._id, !isLiked, token)\r\n      .then((newCard) => {\r\n        console.log(newCard);\r\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\r\n        setCards(newCards);\r\n      })\r\n      .catch((err) => console.error(err));\r\n  }\r\n\r\n  function handleCardDeleteRequest(card) {\r\n    setCardDelete(card);\r\n    setIsDeleteReqPopupOpen(true);\r\n  }\r\n\r\n  function handleCardDelete(e) {\r\n    setDataSending(true);\r\n    e.preventDefault();\r\n    api\r\n      .removeCard(cardDelete._id, token)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c !== cardDelete);\r\n        setCards(newCards);\r\n      })\r\n      .then(() => setIsDeleteReqPopupOpen(false))\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setDataSending(false));\r\n  }\r\n\r\n  function handleEditAvatarClick() {\r\n    setEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(card) {\r\n    setSelectedCard({ ...card, isOpen: true });\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setEditProfilePopupOpen(false);\r\n    setAddPlacePopupOpen(false);\r\n    setEditAvatarPopupOpen(false);\r\n    setSelectedCard({});\r\n    setIsDeleteReqPopupOpen(false);\r\n    setIsInfoTooltipPopupOpen(false);\r\n  }\r\n\r\n  function handleUpdateUser(user) {\r\n    setDataSending(true);\r\n    api\r\n      .setUserInfo(user, token)\r\n      .then((update) => setCurrentUser(update))\r\n      .then(() => closeAllPopups())\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setDataSending(false));\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    setDataSending(true);\r\n    api\r\n      .changeAvatar(avatar, token)\r\n      .then((update) => setCurrentUser(update))\r\n      .then(() => closeAllPopups())\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setDataSending(false));\r\n  }\r\n\r\n  function handleAddPlaceSubmit(card) {\r\n    setDataSending(true);\r\n    api\r\n      .addCard(card, token)\r\n      .then((update) => setCards([update, ...cards]))\r\n      .then(() => closeAllPopups())\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setDataSending(false));\r\n  }\r\n\r\n  useEffect(() => {\r\n    function escFunction(e) {\r\n      if (e.keyCode === 27) closeAllPopups();\r\n    }\r\n    document.addEventListener('keydown', escFunction);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', escFunction);\r\n    };\r\n  }, []);\r\n\r\n  function onRegister(email, password) {\r\n    auth\r\n      .register(email, password)\r\n      .then((data) => {\r\n        if (data) {\r\n          setInfoTooltipMessage('Вы успешно зарегистрировались!');\r\n          setIsInfoTooltipPopupOpen(true);\r\n          setIsInfoTooltipTypeSuccess(true);\r\n          history.push('/sign-in');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setInfoTooltipMessage('Что-то пошло не так! Попробуйте ещё раз.');\r\n        setIsInfoTooltipPopupOpen(true);\r\n        setIsInfoTooltipTypeSuccess(false);\r\n        if (err === 400)\r\n          return console.log('Ошибка: некорректно заполнено одно из полей');\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function onLogin(email, password) {\r\n    auth\r\n      .authorize(email, password)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          setToken(data.token);\r\n          localStorage.setItem('token', data.token);\r\n          setUserEmail(email);\r\n          setLoggedIn(true);\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        setInfoTooltipMessage('Неверный логин или пароль! Попробуйте ещё раз.');\r\n        setIsInfoTooltipPopupOpen(true);\r\n        setIsInfoTooltipTypeSuccess(false);\r\n        if (err === 400) return console.log('не передано одно из полей');\r\n        if (err === 401) return console.log('Неверный логин или пароль');\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  function tokenCheck() {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      setToken(token);\r\n      auth\r\n        .getContent(token)\r\n        .then((userData) => {\r\n          setLoggedIn(true);\r\n          setUserEmail(userData.email);\r\n          history.push('/');\r\n        })\r\n        .catch((err) => {\r\n          if (err === 400)\r\n            return console.log('Токен не передан или передан не в том формате');\r\n          if (err === 401) return console.log('Переданный токен некорректен');\r\n          console.log(err);\r\n        });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  }, []);\r\n\r\n  function onSignOut() {\r\n    localStorage.removeItem('token');\r\n    setLoggedIn(false);\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  return (\r\n    <div className=\"root\">\r\n      <div className=\"page\">\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <Header\r\n            loggedIn={loggedIn}\r\n            userEmail={userEmail}\r\n            onClick={onSignOut}\r\n          />\r\n          <main className=\"content\">\r\n            <Switch>\r\n              <ProtectedRoute exact path=\"/\" loggedIn={loggedIn}>\r\n                <Main\r\n                  onEditAvatar={handleEditAvatarClick}\r\n                  onEditProfile={handleEditProfileClick}\r\n                  onAddPlace={handleAddPlaceClick}\r\n                  onCardClick={handleCardClick}\r\n                  cards={cards}\r\n                  onCardLike={handleCardLike}\r\n                  onCardDelete={handleCardDeleteRequest}\r\n                  isCardsLoading={isCardsLoading}\r\n                />\r\n              </ProtectedRoute>\r\n              <Route path=\"/sign-up\">\r\n                <Register onRegister={onRegister} />\r\n              </Route>\r\n              <Route path=\"/sign-in\">\r\n                <Login onLogin={onLogin} />\r\n              </Route>\r\n              <Route>\r\n                {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\r\n              </Route>\r\n            </Switch>\r\n          </main>\r\n          <Footer />\r\n\r\n          <InfoTooltip\r\n            message={infoTooltipMessage}\r\n            isSuccess={isInfoTooltipTypeSuccess}\r\n            isOpen={isInfoTooltipPopupOpen}\r\n            onClose={closeAllPopups}\r\n          />\r\n\r\n          <EditAvatarPopup\r\n            isSending={isDataSending}\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n          />\r\n\r\n          <EditProfilePopup\r\n            isSending={isDataSending}\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onUpdateUser={handleUpdateUser}\r\n          />\r\n\r\n          <AddPlacePopup\r\n            isSending={isDataSending}\r\n            isOpen={isAddPlacePopupOpen}\r\n            onClose={closeAllPopups}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n          />\r\n\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n\r\n          <PopupWithForm\r\n            isEnabled=\"true\"\r\n            name=\"card-delete\"\r\n            title=\"Вы уверены?\"\r\n            isOpen={isDeleteReqPopupOpen}\r\n            onClose={closeAllPopups}\r\n            onSubmit={handleCardDelete}\r\n            buttonText={isDataSending ? 'Удаление...' : 'Да'}\r\n          />\r\n        </CurrentUserContext.Provider>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}